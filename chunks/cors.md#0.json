{
  "id": "cors.md#0",
  "post_urls": [
    "https://tds.s-anand.net/#/cors.md",
    "https://tds.s-anand.net/#/../cors.md"
  ],
  "content": "## CORS: Cross-Origin Resource Sharing\n\nCORS (Cross-Origin Resource Sharing) is a security mechanism that controls how web browsers handle requests between different origins (domains, protocols, or ports). Data scientists need CORS for APIs serving data or analysis to a browser on a different domain. Watch this practical explanation of CORS (3 min):\n\n[! [CORS in 100 Seconds](https://i.ytimg.com/vi_webp/4KHiSt0oLJ0/sddefault.webp)](https://youtu.be/4KHiSt0oLJ0)\n\nKey CORS concepts:\n\n- **Same-Origin Policy**: Browsers block requests between different origins by default\n- **CORS Headers**: Server responses must include specific headers to allow cross-origin requests\n- **Preflight Requests**: Browsers send OPTIONS requests to check if the actual request is allowed\n- **Credentials**: Special handling required for requests with cookies or authentication\n\nIf you're exposing your API with a GET request publicly, the only thing you need to do is set the HTTP header `Access-Control-Allow-Origin: *`. Here are other common CORS headers:\n\n```http\nAccess-Control-Allow-Origin: https://example.com\nAccess-Control-Allow-Methods: GET, POST, PUT, DELETE\nAccess-Control-Allow-Headers: Content-Type, Authorization\nAccess-Control-Allow-Credentials: true\n```\n\nTo implement CORS in FastAPI, use the [`CORSMiddleware` middleware](https://fastapi.tiangolo.com/tutorial/cors/):\n\n```python\nfrom fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\n\napp = FastAPI()\n\napp.add_middleware(CORSMiddleware, allow_origins=[\"*\"]) # Allow GET requests from all origins\n# Or, provide more granular control:\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://example.com\"],  # Allow a specific domain\n    allow_credentials=True,  # Allow cookies\n    allow_methods=[\"GET\", \"POST\", \"PUT\", \"DELETE\"],  # Allow specific methods\n    allow_headers=[\"*\"],  # Allow all headers\n)\n```\n\nTesting CORS with JavaScript:\n\n```javascript\n// Simple request\nconst response = await fetch(\"https://api.example.com/data\", {\n  method: \"GET\",\n  headers: { \"Content-Type\": \"application/json\" },\n});\n\n// Request with credentials\nconst response = await fetch(\"https://api.example.com/data\", {\n  credentials: \"include\",\n  headers: { \"Content-Type\": \"application/json\" },\n});\n```\n\nUseful CORS debugging tools:\n\n- [CORS Checker](https://cors-test.codehappy.dev/): Test CORS configurations\n- Browser DevTools Network tab: Inspect CORS headers and preflight requests\n- [cors-anywhere](https://github.com/Rob--W/cors-anywhere): CORS proxy for development\n\nCommon CORS errors and solutions:\n\n- `No 'Access-Control-Allow-Origin' header`: Configure server to send proper CORS headers\n- `Request header field not allowed`: Add required headers to `Access-Control-Allow-Headers`\n- `Credentials flag`: Set both `credentials: 'include'` and `Access-Control-Allow-Credentials: true`\n- `Wild card error`: Cannot use `*` with credentials; specify exact origins"
}