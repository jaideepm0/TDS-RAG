{"id": 596662, "name": "SAKSHI PATHAK", "username": "Sakshi6479", "avatar_template": "/user_avatar/discourse.onlinedegree.iitm.ac.in/sakshi6479/{size}/110446_2.png", "created_at": "2025-02-14T13:29:17.644Z", "cooked": "<p>sir using prompt method also i am having the error please provide a step wise solution so then i can make functions accordingly.</p>\n<pre><code class=\"lang-auto\">#/// Scirpt\n# requires-python = \"&gt;=3.13\"\n# dependencies = [\n#     \"fastapi\",\n#     \"uvicorn\",\n#     \"requests\",\n# ]\n#///\n\nfrom fastapi import FastAPI, HTTPException, status\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom fastapi.responses import JSONResponse\n\nimport requests\nimport os\nimport json\nfrom subprocess import run\n\napp = FastAPI()\n\nresponse_format = {\n    \"type\": \"json\",\n    \"json_schema\": {\n        \"name\": \"taks_runner\",\n        \"schema\": {\n            \"type\": \"object\",\n            \"required\": [\"python_dependencies\",\"python_code\"],\n            \"properties\": {\n                \"python_code\": {\n                    \"type\": \"string\",\n                    \"description\": \"Python code to perform the task\"\n                },\n                \"python_dependencies\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"object\",\n                        \"properties\": {\n                            \"module\": {\n                                \"type\": \"string\",\n                                \"description\": \"Name of the python module\"\n                            }\n                        },\n                        \"required\": [\"module\"],\n                        \"additionalProperties\": False\n                    }\n            }\n        }\n    }\n}\n}\n\nprimary_prompt = \"\"\"\n                You are an automated agent, so generate python code that does the specified task.\n                Assume that uv and python are pre-installed.\n                Assume that code you generate will be executed inside a docker container.\n                Inorder to perform any task if some python package is required to install, provide name of those modules. \n\"\"\"\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"GET\", \"POST\"],\n    allow_headers=[\"*\"],\n)\n\nAIPROXY_TOKEN = os.getenv(\"AIPROXY_TOKEN\")\nheaders = {\n    \"Content-Type\": \"application/json\",\n    \"Authorization\": f\"Bearer {AIPROXY_TOKEN}\"\n}\n\n@app.get(\"/\")\ndef home():\n    return {\"welcome to the task runner\"}\n@app.post(\"/run\")\ndef task_runnner(task: str):\n    url = \"https://aiproxy.sanand.workers.dev/openai/v1/chat/completions\"\n    data = {\n        \"model\": \"gpt-4o-mini\", \n         \"messages\": [\n             {\n              \"role\": \"user\", \n              \"content\": task\n              },\n              {\n                \"role\": \"system\",\n                \"content\": f\"\"\"{primary_prompt}\"\"\"\n            }\n         ],\n         \"response_format\": response_format\n    }\n\n    response = requests.post(url=url, headers=headers, json=data)\n    r = response.json()\n\n    return r\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre>\n<p><div class=\"lightbox-wrapper\"><a class=\"lightbox\" href=\"https://europe1.discourse-cdn.com/flex013/uploads/iitm/original/3X/a/6/a60823d7458d88b699955503f1e0665b9f4e4a4c.png\" data-download-href=\"/uploads/short-url/nGMHoGQOqao8rFmV5aSYe2okJXK.png?dl=1\" title=\"Screenshot 2025-02-14 185820\" rel=\"noopener nofollow ugc\"><img src=\"https://europe1.discourse-cdn.com/flex013/uploads/iitm/optimized/3X/a/6/a60823d7458d88b699955503f1e0665b9f4e4a4c_2_655x500.png\" alt=\"Screenshot 2025-02-14 185820\" data-base62-sha1=\"nGMHoGQOqao8rFmV5aSYe2okJXK\" width=\"655\" height=\"500\" srcset=\"https://europe1.discourse-cdn.com/flex013/uploads/iitm/optimized/3X/a/6/a60823d7458d88b699955503f1e0665b9f4e4a4c_2_655x500.png, https://europe1.discourse-cdn.com/flex013/uploads/iitm/optimized/3X/a/6/a60823d7458d88b699955503f1e0665b9f4e4a4c_2_982x750.png 1.5x, https://europe1.discourse-cdn.com/flex013/uploads/iitm/optimized/3X/a/6/a60823d7458d88b699955503f1e0665b9f4e4a4c_2_1310x1000.png 2x\" data-dominant-color=\"272828\"><div class=\"meta\"><svg class=\"fa d-icon d-icon-far-image svg-icon\" aria-hidden=\"true\"><use href=\"#far-image\"></use></svg><span class=\"filename\">Screenshot 2025-02-14 185820</span><span class=\"informations\">1945\u00d71484 229 KB</span><svg class=\"fa d-icon d-icon-discourse-expand svg-icon\" aria-hidden=\"true\"><use href=\"#discourse-expand\"></use></svg></div></a></div></p>\n<p><a class=\"mention\" href=\"/u/carlton\">@carlton</a> , <a class=\"mention\" href=\"/u/saransh_saini\">@Saransh_Saini</a> , <a class=\"mention\" href=\"/u/jivraj\">@Jivraj</a></p>", "post_number": 638, "post_type": 1, "posts_count": 614, "updated_at": "2025-02-18T10:47:20.162Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 131, "readers_count": 130, "score": 41.0, "yours": false, "topic_id": 164277, "topic_slug": "project-1-llm-based-automation-agent-discussion-thread-tds-jan-2025", "display_username": "SAKSHI PATHAK", "primary_group_name": "ds-students", "flair_name": "ds-students", "flair_url": null, "flair_bg_color": "", "flair_color": "", "flair_group_id": 294, "badges_granted": [], "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_see_hidden_post": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1, "can_act": true}, {"id": 6, "can_act": true}, {"id": 3, "can_act": true}, {"id": 4, "can_act": true}, {"id": 8, "can_act": true}, {"id": 10, "can_act": true}, {"id": 7, "can_act": true}], "moderator": false, "admin": false, "staff": false, "user_id": 40000, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "post_url": "/t/project-1-llm-based-automation-agent-discussion-thread-tds-jan-2025/164277/638", "user_cakedate": "2024-10-04", "reactions": [{"id": "heart", "type": "emoji", "count": 1}], "current_user_reaction": null, "reaction_users_count": 1, "current_user_used_main_reaction": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false, "topic_accepted_answer": null}