{"id": 594216, "name": "Guddu Kumar Mishra ", "username": "22f3001315", "avatar_template": "/user_avatar/discourse.onlinedegree.iitm.ac.in/22f3001315/{size}/90556_2.png", "created_at": "2025-02-12T20:00:07.871Z", "cooked": "<p>ANY SUGGESTIONS (just one digit away) ::</p>\n<pre><code class=\"lang-auto\">import easyocr\nfrom pathlib import Path\nimport re\n\ndef extract_credit_card_number(input_image: str, output_file: str):\n    \n    input_path = Path(f\".{input_image}\")\n    output_path = Path(f\".{output_file}\")\n\n    if not input_path.exists():\n        raise ValueError(f\"Image file {input_path} does not exist.\")\n\n    # Step 1: Use OCR to extract text from the image\n    reader = easyocr.Reader(['en'])\n    try:\n        result = reader.readtext(str(input_path))\n    except Exception as e:\n        raise ValueError(f\"OCR processing failed: {str(e)}\")\n\n    # Combine all extracted text into a single string\n    extracted_text = \" \".join([text for (_, text, _) in result])\n\n    # Step 2: Use the LLM to refine the extracted text and extract the credit card number\n    prompt = f\"\"\"\n    The following text was extracted from an image. It may contain a credit card number. \n    Extract the credit card number and return only the number without spaces or dashes. \n    If no credit card number is found, return \"None\".\n\n    Extracted text: {extracted_text}\n    \"\"\"\n    try:\n        response = chat_completion(prompt)\n        card_number = response.get(\"choices\", [])[0].get(\"message\", {}).get(\"content\", \"\").strip()\n\n        # Validate the card number (basic check for 16 digits)\n        if card_number.lower() == \"none\" or not card_number.isdigit() or len(card_number) != 16:\n            raise ValueError(\"No valid credit card number found in the image.\")\n\n        # Write the card number to the output file\n        output_path.parent.mkdir(parents=True, exist_ok=True)\n        with open(output_path, \"w\") as f:\n            f.write(card_number)\n\n        return f\"A8 Completed: Credit card number extracted and written to {output_file}\"\n    except Exception as e:\n        raise ValueError(f\"Failed to process text with LLM: {str(e)}\")\n</code></pre>\n<pre><code class=\"lang-auto\"> /data/credit-card.txt\n\u26a0\ufe0f EXPECTED:\n4026399336539356\n\u26a0\ufe0f RESULT:\n4026399338539356\n</code></pre>", "post_number": 176, "post_type": 1, "posts_count": 614, "updated_at": "2025-02-12T20:01:53.952Z", "reply_count": 1, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 3, "reads": 151, "readers_count": 150, "score": 50.0, "yours": false, "topic_id": 164277, "topic_slug": "project-1-llm-based-automation-agent-discussion-thread-tds-jan-2025", "display_username": "Guddu Kumar Mishra ", "primary_group_name": "ds-students", "flair_name": "ds-students", "flair_url": null, "flair_bg_color": "", "flair_color": "", "flair_group_id": 294, "badges_granted": [], "version": 2, "can_edit": false, "can_delete": false, "can_recover": false, "can_see_hidden_post": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "can_act": true}, {"id": 6, "can_act": true}, {"id": 3, "can_act": true}, {"id": 4, "can_act": true}, {"id": 8, "can_act": true}, {"id": 10, "can_act": true}, {"id": 7, "can_act": true}], "moderator": false, "admin": false, "staff": false, "user_id": 16397, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "post_url": "/t/project-1-llm-based-automation-agent-discussion-thread-tds-jan-2025/164277/176", "user_cakedate": "2023-01-27", "reactions": [], "current_user_reaction": null, "reaction_users_count": 0, "current_user_used_main_reaction": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false, "topic_accepted_answer": null}