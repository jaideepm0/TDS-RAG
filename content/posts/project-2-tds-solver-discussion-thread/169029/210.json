{"id": 613689, "name": "Shivaditya Bhattacharya", "username": "22f3000819", "avatar_template": "/user_avatar/discourse.onlinedegree.iitm.ac.in/22f3000819/{size}/66738_2.png", "created_at": "2025-03-30T23:47:44.092Z", "cooked": "<p><a class=\"mention\" href=\"/u/saransh_saini\">@Saransh_Saini</a> <a class=\"mention\" href=\"/u/jivraj\">@Jivraj</a> <a class=\"mention\" href=\"/u/carlton\">@carlton</a><br>\nSir, I have an issue in GA5 Q3</p>\n<p>What is the number of successful GET requests for pages under <strong>/telugu/</strong> from <strong>11:00</strong> until before <strong>20:00</strong> on Mondays?</p>\n<p>For this, I have used two python scripts to get the answer, one written completely by me and another from someone else\u2019s solution; both give the same answer - <strong>2698</strong></p>\n<p>However, the portal says it\u2019s incorrect. No modifications resulting in different answer are being accepted either and the modifications themselves seem to break the bounds of the question.</p>\n<p>Please check the scripts and tell me where I am going wrong.</p>\n<p>My script:</p>\n<pre><code class=\"lang-auto\">import subprocess\nfrom datetime import datetime\n\ndef isDay(dtobj, day):\n  return dtobj.weekday() == day\n\ndef isTime(dtobj, l, u):\n  return l &lt;= dtobj.hour &lt; u\n\nstep1 = subprocess.run(\"cat data | grep -i 'GET /telugu/'\", capture_output=True, shell=True, text=True)\nsubprocess.run(\"rm -f forstep2.txt\", shell=True)\nwith open('forstep2.txt', 'a') as f:\n  for line in step1.stdout.splitlines():\n    try:\n      status = int(line.split()[8])\n    except Exception as e:\n      status = 400\n    if 200 &lt;= status &lt; 300:\n      f.write(line + '\\n')\nstep2 = subprocess.run(\"cat forstep2.txt | cut -d ' ' -f4\", capture_output=True, shell=True, text=True)\ncount = 0\nfor line in step2.stdout.splitlines():\n  log_datetime = datetime.strptime(line.strip('['), \"%d/%b/%Y:%H:%M:%S\")\n  if(isDay(log_datetime, 0) and isTime(log_datetime, 11, 20)):\n    count += 1\n\ncount\n</code></pre>\n<p>I had extracted and uploaded the <code>data</code> after extraction using gzip into colab and then executed the script.</p>\n<p>The other script:</p>\n<pre><code class=\"lang-auto\">import pandas as pd\nimport gzip\nimport re\nimport os\nfrom datetime import datetime\nimport hashlib\nfrom google.colab import files\n\n# Function to compute SHA-256 hash\ndef compute_hash(text):\n    return hashlib.sha256(text.encode()).hexdigest()\n\n# Function to parse Apache log entries\ndef parse_log_line(line):\n    log_pattern = (r'^(\\S+) (\\S+) (\\S+) \\[(.*?)\\] \"(\\S+) (.*?) (\\S+)\" (\\d+) (\\S+) \"(.*?)\" \"(.*?)\" (\\S+) (\\S+)$')\n    match = re.match(log_pattern, line)\n    if match:\n        return {\n            \"ip\": match.group(1),\n            \"time\": match.group(4),\n            \"method\": match.group(5),\n            \"url\": match.group(6),\n            \"protocol\": match.group(7),\n            \"status\": int(match.group(8)),\n            \"size\": match.group(9),\n            \"referer\": match.group(10),\n            \"user_agent\": match.group(11),\n            \"vhost\": match.group(12),\n            \"server\": match.group(13)\n        }\n    return None\n\n# Upload file\nuploaded = files.upload()\nfile_path = list(uploaded.keys())[0]  # Get uploaded file name\n\n# Load and parse the log file\ndef load_logs(file_path):\n    if not os.path.exists(file_path):\n        print(f\"Error: File '{file_path}' not found.\")\n        return pd.DataFrame()\n\n    parsed_logs = []\n    with gzip.open(file_path, 'rt', encoding='utf-8') as f:\n        for line in f:\n            parsed_entry = parse_log_line(line)\n            if parsed_entry:\n                parsed_logs.append(parsed_entry)\n    return pd.DataFrame(parsed_logs)\n\n# Convert time format\ndef convert_time(timestamp):\n    return datetime.strptime(timestamp, \"%d/%b/%Y:%H:%M:%S %z\")\n\ndf = load_logs(file_path)\n\nif not df.empty:\n    df[\"datetime\"] = df[\"time\"].apply(convert_time)\n    df[\"day_of_week\"] = df[\"datetime\"].dt.strftime('%A')\n    df[\"hour\"] = df[\"datetime\"].dt.hour\n\n    # Filter conditions\n    filtered_df = df[\n        (df[\"method\"] == \"GET\") &amp;\n        (df[\"url\"].str.startswith(\"/telugu/\")) &amp;\n        (df[\"status\"] &gt;= 200) &amp; (df[\"status\"] &lt; 300) &amp;\n        (df[\"day_of_week\"] == \"Monday\") &amp;\n        (df[\"hour\"] &gt;= 11) &amp;\n        (df[\"hour\"] &lt; 20)\n    ]\n\n    # Compute hash of the result\n    result_hash = compute_hash(str(len(filtered_df)))\n\n    # Output the count and hash\n    print(\"Successful GET requests for /telugu/ on Mondays (11:00-7:59 AM):\", len(filtered_df))\nelse:\n    print(\"No log data available for processing.\")\n</code></pre>\n<p>Both give the same output: 2698. Please help me identify the error, if any.</p>", "post_number": 210, "post_type": 1, "posts_count": 690, "updated_at": "2025-03-30T23:48:13.502Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 3, "reads": 171, "readers_count": 170, "score": 48.8, "yours": false, "topic_id": 169029, "topic_slug": "project-2-tds-solver-discussion-thread", "display_username": "Shivaditya Bhattacharya", "primary_group_name": "ds-students", "flair_name": "ds-students", "flair_url": null, "flair_bg_color": "", "flair_color": "", "flair_group_id": 294, "badges_granted": [], "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_see_hidden_post": false, "can_wiki": false, "read": true, "user_title": "", "bookmarked": false, "actions_summary": [{"id": 2, "can_act": true}, {"id": 6, "can_act": true}, {"id": 3, "can_act": true}, {"id": 4, "can_act": true}, {"id": 8, "can_act": true}, {"id": 10, "can_act": true}, {"id": 7, "can_act": true}], "moderator": false, "admin": false, "staff": false, "user_id": 16002, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "post_url": "/t/project-2-tds-solver-discussion-thread/169029/210", "user_cakedate": "2023-01-25", "user_birthdate": "1904-03-07", "reactions": [], "current_user_reaction": null, "reaction_users_count": 0, "current_user_used_main_reaction": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false, "topic_accepted_answer": null}