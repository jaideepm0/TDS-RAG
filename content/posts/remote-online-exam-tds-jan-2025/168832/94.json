{"id": 603026, "name": "Saransh Saini", "username": "Saransh_Saini", "avatar_template": "/user_avatar/discourse.onlinedegree.iitm.ac.in/saransh_saini/{size}/123495_2.png", "created_at": "2025-03-03T11:39:26.661Z", "cooked": "<p>Hi <a class=\"mention\" href=\"/u/23f3002537\">@23f3002537</a><br>\nThe problem is that, here you are sending headers unnecessary and overwriting the original headers. Moreover you were returning the text of the response instead of the json. Here is the revised version.</p>\n<pre data-code-wrap=\"python\"><code class=\"lang-python\">from fastapi import FastAPI, Request, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nimport httpx\nimport uvicorn\n\napp = FastAPI()\n\n# Add CORS middleware to handle preflight OPTIONS requests\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n@app.get(\"/api\")\nasync def proxy(url: str, request: Request):\n    headers = {key: value for key, value in request.headers.items() if key.lower() != \"host\"}\n    try:\n        async with httpx.AsyncClient() as client:\n            response = await client.get(url)\n            return response.json()\n    except httpx.RequestError as e:\n        raise HTTPException(status_code=500, detail=f\"Request failed: {str(e)}\")\n\nif __name__ == \"__main__\":\n    uvicorn.run(app, host=\"127.0.0.1\", port=8000)\n</code></pre>", "post_number": 94, "post_type": 1, "posts_count": 113, "updated_at": "2025-03-03T11:39:26.661Z", "reply_count": 0, "reply_to_post_number": 53, "quote_count": 0, "incoming_link_count": 0, "reads": 82, "readers_count": 81, "score": 31.4, "yours": false, "topic_id": 168832, "topic_slug": "remote-online-exam-tds-jan-2025", "display_username": "Saransh Saini", "primary_group_name": "ds-students", "flair_name": "ds-students", "flair_url": null, "flair_bg_color": "", "flair_color": "", "flair_group_id": 294, "badges_granted": [], "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_see_hidden_post": false, "can_wiki": false, "read": false, "user_title": "Course TA", "title_is_group": false, "reply_to_user": {"id": 23997, "username": "23f3002537", "name": "Arnav Raj ", "avatar_template": "/user_avatar/discourse.onlinedegree.iitm.ac.in/23f3002537/{size}/88584_2.png"}, "bookmarked": false, "actions_summary": [{"id": 2, "count": 1, "can_act": true}, {"id": 6, "can_act": true}, {"id": 3, "can_act": true}, {"id": 4, "can_act": true}, {"id": 8, "can_act": true}, {"id": 10, "can_act": true}, {"id": 7, "can_act": true}], "moderator": false, "admin": false, "staff": false, "group_moderator": true, "user_id": 13078, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "post_url": "/t/remote-online-exam-tds-jan-2025/168832/94", "user_cakedate": "2022-05-02", "user_birthdate": "1904-08-04", "reactions": [{"id": "+1", "type": "emoji", "count": 1}], "current_user_reaction": null, "reaction_users_count": 1, "current_user_used_main_reaction": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false, "topic_accepted_answer": null}