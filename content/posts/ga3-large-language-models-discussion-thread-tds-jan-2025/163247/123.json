{"id": 590975, "name": "Sudhish Narayan S", "username": "Sudhishnarayan", "avatar_template": "/user_avatar/discourse.onlinedegree.iitm.ac.in/sudhishnarayan/{size}/66833_2.png", "created_at": "2025-02-05T18:34:39.598Z", "cooked": "<p>This is my code for the 7th question of finding similarities. This code, I tried on my own, but it is showing Incorrect Matches. I think so it is due to the Aliababa GTE Model. Please correct me if I have gone wrong anywhere. Thank You</p>\n<pre data-code-wrap=\"python\"><code class=\"lang-python\">from fastapi import FastAPI, Query\nimport httpx\nfrom typing import List\nimport numpy as np\nimport uvicorn\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom pydantic import BaseModel\n\nfrom sentence_transformers import SentenceTransformer\nfrom sentence_transformers.util import cos_sim\n\nmodel = SentenceTransformer('Alibaba-NLP/gte-large-en-v1.5', trust_remote_code=True)\napp = FastAPI()\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],  # Allows all origins\n    allow_credentials=True,\n    allow_methods=[\"OPTIONS\", \"POST\"],  # Allows all methods (GET, POST, OPTIONS, etc.)\n    allow_headers=[\"*\"],  # Allows all headers\n)\n\nclass similarity1(BaseModel):\n    docs: list[str]\n    query: str\n@app.post(\"/similarity\")\nasync def similarity(similarity1: similarity1):\n    docs = similarity1.docs\n    query = similarity1.query\n    results_docs = model.encode(docs)\n    results_query = model.encode(query)\n    similarities = {}\n    output = []\n    for i in range(len(results_docs)):\n        c = np.dot(results_docs[i], results_query) / (np.linalg.norm(results_docs[i])*np.linalg.norm(results_query))\n        similarities[c] = docs[i]\n    k = sorted(list(similarities.keys()))\n    for i in k[::-1][:3]:\n        output.append(similarities[i])\n    return {\"matches\" : output}\nif __name__ == \"__main__\":\n  (uvicorn.run(app))\n\n</code></pre>", "post_number": 123, "post_type": 1, "posts_count": 149, "updated_at": "2025-02-05T18:34:39.598Z", "reply_count": 0, "reply_to_post_number": null, "quote_count": 0, "incoming_link_count": 0, "reads": 78, "readers_count": 77, "score": 15.0, "yours": false, "topic_id": 163247, "topic_slug": "ga3-large-language-models-discussion-thread-tds-jan-2025", "display_username": "Sudhish Narayan S", "primary_group_name": "ds-students", "flair_name": "ds-students", "flair_url": null, "flair_bg_color": "", "flair_color": "", "flair_group_id": 294, "badges_granted": [], "version": 1, "can_edit": false, "can_delete": false, "can_recover": false, "can_see_hidden_post": false, "can_wiki": false, "read": true, "user_title": null, "bookmarked": false, "actions_summary": [{"id": 2, "can_act": true}, {"id": 6, "can_act": true}, {"id": 3, "can_act": true}, {"id": 4, "can_act": true}, {"id": 8, "can_act": true}, {"id": 10, "can_act": true}, {"id": 7, "can_act": true}], "moderator": false, "admin": false, "staff": false, "user_id": 32407, "hidden": false, "trust_level": 1, "deleted_at": null, "user_deleted": false, "edit_reason": null, "can_view_edit_history": true, "wiki": false, "post_url": "/t/ga3-large-language-models-discussion-thread-tds-jan-2025/163247/123", "user_cakedate": "2024-06-04", "reactions": [], "current_user_reaction": null, "reaction_users_count": 0, "current_user_used_main_reaction": false, "can_accept_answer": false, "can_unaccept_answer": false, "accepted_answer": false, "topic_accepted_answer": null}